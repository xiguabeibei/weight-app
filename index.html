<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="å¥åº·è®°å½•">
<title>å¥åº·è®°å½•</title>

<style>
:root{
  --pink:#ff9ab5;
  --purple:#b8a6ff;
  --blue:#a6d8ff;
  --bg:linear-gradient(180deg,#fff0f5,#f6f7ff);
  --card:#ffffffcc;
  --text:#222;
  --sub:#666;
}

@media (prefers-color-scheme: dark){
  :root{
    --bg:linear-gradient(180deg,#0f1115,#1a1d26);
    --card:#1f2430cc;
    --text:#f2f2f2;
    --sub:#aaa;
  }
}

body{
  margin:0;
  background:var(--bg);
  font-family:-apple-system,BlinkMacSystemFont,"PingFang SC";
  color:var(--text);
}

.app{
  padding:22px;
  padding-bottom:140px;
}

h1{font-size:28px;margin-bottom:10px;}
h2{font-size:18px;color:var(--sub);margin-bottom:10px;}

.card{
  backdrop-filter:blur(20px);
  background:var(--card);
  border-radius:28px;
  padding:20px;
  margin-bottom:18px;
  box-shadow:0 20px 40px rgba(0,0,0,.12);
  animation:rise .5s cubic-bezier(.2,.8,.2,1);
}

@keyframes rise{
  from{opacity:0;transform:translateY(30px)}
  to{opacity:1;transform:none}
}

input,select{
  width:100%;
  padding:16px;
  border-radius:18px;
  border:1px solid #eee;
  font-size:16px;
  margin-bottom:12px;
}

button{
  width:100%;
  padding:16px;
  border-radius:999px;
  background:linear-gradient(135deg,var(--pink),var(--purple));
  border:none;
  color:#fff;
  font-size:17px;
}

.tabs{
  position:fixed;
  bottom:0;left:0;right:0;
  display:flex;
  background:#ffffffee;
  backdrop-filter:blur(20px);
  border-top:1px solid #ddd;
}

.tabs button{
  flex:1;
  background:none;
  border:none;
  padding:14px 0 10px;
  font-size:14px;
}

.page{display:none;animation:slide .35s ease}
.page.active{display:block}

@keyframes slide{
  from{opacity:0;transform:translateX(20px)}
  to{opacity:1;transform:none}
}

.illustration{
  position:absolute;
  top:-60px;right:-40px;
  width:200px;height:200px;
  background:radial-gradient(circle,var(--blue),transparent 70%);
  border-radius:50%;
  z-index:-1;
}

.encourage{
  font-size:18px;
  color:var(--pink);
  margin-top:8px;
}
</style>
</head>

<body>
<div class="app">

<div class="page active" id="weightPage">
<h1>ä½“é‡è®°å½•</h1>
<div class="card">
<div class="illustration"></div>
<input id="name" placeholder="å§“å">
<input id="weight" type="number" step="0.1" placeholder="ä½“é‡ kg">
<button onclick="saveWeight()">ä¿å­˜ä½“é‡</button>
<div id="encourage" class="encourage"></div>
</div>
</div>

<div class="page" id="foodPage">
<h1>é¥®é£Ÿè®°å½•</h1>
<div class="card">
<input id="foodName" placeholder="é£Ÿæ">
<input id="foodCal" type="number" placeholder="å¡è·¯é‡Œ kcal">
<button onclick="saveFood()">ä¿å­˜é¥®é£Ÿ</button>
<div id="foodList"></div>
</div>
</div>

<div class="page" id="sportPage">
<h1>è¿åŠ¨è®°å½•</h1>
<div class="card">
<select id="sportType">
<option>èµ°è·¯</option>
<option>è·‘æ­¥</option>
<option>åŠ›é‡</option>
<option>å…¶ä»–</option>
</select>
<input id="sportCal" type="number" placeholder="æ¶ˆè€— kcal">
<button onclick="saveSport()">ä¿å­˜è¿åŠ¨</button>
<div id="sportList"></div>
</div>
</div>

</div>

<div class="tabs">
<button onclick="show('weightPage')">âš–ï¸<br>ä½“é‡</button>
<button onclick="show('foodPage')">ğŸ½<br>é¥®é£Ÿ</button>
<button onclick="show('sportPage')">ğŸƒ<br>è¿åŠ¨</button>
</div>

<script>
const store=JSON.parse(localStorage.getItem("health")||"{}");
const today=new Date().toISOString().slice(0,10);

function save(){
 localStorage.setItem("health",JSON.stringify(store));
}

function saveWeight(){
 const n=name.value.trim(), w=weight.value;
 if(!n||!w)return;
 store[n]=store[n]||{weights:{},foods:{},sports:{}};
 const last=Object.values(store[n].weights).slice(-1)[0];
 store[n].weights[today]=Number(w);
 save();

 if(last){
  encourage.innerText=
   w<last?"ä½ åœ¨å˜è½»ï¼ŒçœŸå¥½ ğŸŒ±":
   w>last?"ä¸€æ¬¡æ³¢åŠ¨æ²¡å…³ç³» ğŸƒ":
   "ä¿æŒä¹Ÿæ˜¯è¿›æ­¥ ğŸ¤";
 }else{
  encourage.innerText="å¼€å§‹è®°å½•ï¼Œå°±æ˜¯æ”¹å˜ âœ¨";
 }
}

function saveFood(){
 const n=name.value.trim();
 if(!n)return;
 store[n]=store[n]||{weights:{},foods:{},sports:{}};
 store[n].foods[today]=store[n].foods[today]||[];
 store[n].foods[today].push({
  food:foodName.value,
  cal:foodCal.value
 });
 save();
 renderFood(n);
}

function saveSport(){
 const n=name.value.trim();
 if(!n)return;
 store[n]=store[n]||{weights:{},foods:{},sports:{}};
 store[n].sports[today]=store[n].sports[today]||[];
 store[n].sports[today].push({
  type:sportType.value,
  cal:sportCal.value
 });
 save();
 renderSport(n);
}

function renderFood(n){
 foodList.innerHTML="";
 (store[n].foods[today]||[]).forEach(i=>{
  foodList.innerHTML+=`<div>${i.food} Â· ${i.cal} kcal</div>`;
 });
}

function renderSport(n){
 sportList.innerHTML="";
 (store[n].sports[today]||[]).forEach(i=>{
  sportList.innerHTML+=`<div>${i.type} Â· ${i.cal} kcal</div>`;
 });
}

function show(id){
 document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
 document.getElementById(id).classList.add("active");
}
</script>
</body>
</html>
