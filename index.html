<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="å¥åº·å°æœ¬æœ¬">
<title>å¥åº·å°æœ¬æœ¬</title>

<style>
:root{
 --pink:#ff8fb1;
 --purple:#a78bfa;
 --blue:#67e8f9;
 --green:#86efac;
 --bg:linear-gradient(160deg,#fff1f7,#eef4ff);
 --card:#ffffffee;
 --text:#222;
 --sub:#666;
}
@media (prefers-color-scheme: dark){
 :root{
  --bg:linear-gradient(160deg,#0f1115,#1a1d26);
  --card:#1f2430ee;
  --text:#f2f2f2;
  --sub:#aaa;
 }
}
body{
 margin:0;
 font-family:-apple-system,BlinkMacSystemFont,"PingFang SC";
 background:var(--bg);
 color:var(--text);
}
.app{display:flex;height:100vh;}
.sidebar{
 width:260px;
 padding:26px;
 background:linear-gradient(180deg,var(--pink),var(--purple));
 color:#fff;
}
.sidebar h1{font-size:22px;margin-bottom:24px;}
.sidebar button{
 width:100%;margin-bottom:12px;
 padding:14px;border:none;
 border-radius:16px;
 background:#ffffff33;
 color:#fff;font-size:15px;
}
.main{flex:1;padding:30px;overflow:auto;}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:24px;}
.card{
 background:var(--card);
 border-radius:30px;
 padding:22px;
 box-shadow:0 20px 50px rgba(0,0,0,.15);
 animation:up .4s ease;
}
@keyframes up{from{opacity:0;transform:translateY(30px)}}
input,select{
 width:100%;padding:14px;
 border-radius:14px;border:1px solid #ddd;
 margin-bottom:12px;font-size:16px;
}
.primary{
 background:linear-gradient(135deg,var(--pink),var(--purple));
 color:#fff;border:none;
 padding:14px;border-radius:999px;
 font-size:16px;
}
.chart{
 height:260px;display:flex;
 align-items:flex-end;gap:10px;
}
.bar{
 flex:1;border-radius:12px 12px 6px 6px;
 background:linear-gradient(180deg,var(--blue),var(--purple));
 animation:grow .6s ease forwards;
}
@keyframes grow{from{height:0}to{height:var(--h)}}
.tip{margin-top:10px;font-size:18px;color:var(--pink);}
.member{display:flex;justify-content:space-between;margin-bottom:10px;}
</style>
</head>

<body>
<div class="app">
<div class="sidebar">
<h1>å¥åº·å°æœ¬æœ¬</h1>
<button onclick="show('weight')">âš–ï¸ ä½“é‡</button>
<button onclick="show('food')">ğŸš é¥®é£Ÿ</button>
<button onclick="show('sport')">ğŸƒ è¿åŠ¨</button>
<button onclick="show('family')">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ å®¶åº­</button>
</div>

<div class="main">

<div class="page" id="weight">
<div class="grid">
<div class="card">
<h2>ä½“é‡è®°å½•</h2>
<input id="name" placeholder="å§“å">
<input id="date" type="date">
<input id="weightVal" type="number" step="0.1" placeholder="ä½“é‡ kg">
<button class="primary" onclick="saveWeight()">ä¿å­˜</button>
<div id="tip" class="tip"></div>
</div>
<div class="card">
<h2>æœ€è¿‘ 7 å¤©</h2>
<div class="chart" id="weightChart"></div>
</div>
</div>
</div>

<div class="page" id="food" style="display:none">
<div class="card">
<h2>é¥®é£Ÿè®°å½•</h2>
<input id="foodName" placeholder="é£Ÿç‰©">
<input id="foodCal" type="number" placeholder="å¡è·¯é‡Œ">
<button class="primary" onclick="saveFood()">ä¿å­˜</button>
</div>
</div>

<div class="page" id="sport" style="display:none">
<div class="card">
<h2>è¿åŠ¨è®°å½•</h2>
<input id="sportName" placeholder="è¿åŠ¨">
<input id="sportCal" type="number" placeholder="æ¶ˆè€—å¡è·¯é‡Œ">
<button class="primary" onclick="saveSport()">ä¿å­˜</button>
</div>
</div>

<div class="page" id="family" style="display:none">
<div class="card">
<h2>å®¶åº­æ€»è§ˆ</h2>
<div id="familyList"></div>
</div>
</div>

</div>
</div>

<script>
const tips=[
"ä»Šå¤©ä¹Ÿæ˜¯è¢«å¥½è¿çœ·é¡¾çš„ä¸€å¤© âœ¨",
"èº«ä½“åœ¨æ‚„æ‚„å˜å¥½å“¦ ğŸŒ·",
"æ…¢æ…¢æ¥ï¼Œä½†ä¸€ç›´åœ¨å‘å‰ ğŸƒ",
"ä½ åœ¨è®¤çœŸç”Ÿæ´»ï¼Œè¿™å°±å¾ˆå‰å®³ ğŸ’—"
];

const store=JSON.parse(localStorage.getItem("healthCute")||"{}");
date.value=new Date().toISOString().slice(0,10);

function save(){localStorage.setItem("healthCute",JSON.stringify(store));}

function ensure(n,d){
 store[n]=store[n]||{};
 store[n][d]=store[n][d]||{w:null,food:0,sport:0};
}

function saveWeight(){
 const n=name.value,d=date.value,w=Number(weightVal.value);
 if(!n||!d||!w)return;
 ensure(n,d);
 store[n][d].w=w;
 save();
 tip.innerText=tips[Math.floor(Math.random()*tips.length)];
 renderWeight(n);
 renderFamily();
}

function saveFood(){
 ensure(name.value,date.value);
 store[name.value][date.value].food+=Number(foodCal.value||0);
 save();
}

function saveSport(){
 ensure(name.value,date.value);
 store[name.value][date.value].sport+=Number(sportCal.value||0);
 save();
}

function renderWeight(n){
 weightChart.innerHTML="";
 const days=Object.entries(store[n]).slice(-7);
 const max=Math.max(...days.map(e=>e[1].w||0));
 days.forEach(e=>{
  const b=document.createElement("div");
  b.className="bar";
  b.style.setProperty("--h",(e[1].w/max*100||5)+"%");
  weightChart.appendChild(b);
 });
}

function renderFamily(){
 familyList.innerHTML="";
 Object.keys(store).forEach(n=>{
  const last=Object.values(store[n]).slice(-1)[0];
  const div=document.createElement("div");
  div.className="member";
  div.innerHTML=`<strong>${n}</strong><span>${last.w||"--"} kg</span>`;
  familyList.appendChild(div);
 });
}

function show(id){
 document.querySelectorAll(".page").forEach(p=>p.style.display="none");
 document.getElementById(id).style.display="block";
}
</script>
</body>
</html>
