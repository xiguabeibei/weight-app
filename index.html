<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="ÂÅ•Â∫∑ËÆ∞ÂΩï">
<title>ÂÅ•Â∫∑ËÆ∞ÂΩï</title>

<style>
:root{
  --pink:#ff6fa5;
  --purple:#9b7cff;
  --blue:#4fd1ff;
  --bg:linear-gradient(180deg,#fff0f6,#f0f6ff);
  --card:#ffffffdd;
  --text:#222;
  --sub:#666;
}

@media (prefers-color-scheme: dark){
  :root{
    --bg:linear-gradient(180deg,#0f1115,#1a1d26);
    --card:#1f2430dd;
    --text:#f2f2f2;
    --sub:#aaa;
  }
}

body{
  margin:0;
  background:var(--bg);
  font-family:-apple-system,BlinkMacSystemFont,"PingFang SC";
  color:var(--text);
}

.app{
  padding:22px;
  padding-bottom:140px;
}

h1{font-size:28px;margin-bottom:10px;}
h2{font-size:18px;color:var(--sub);margin-bottom:10px;}

.card{
  backdrop-filter:blur(20px);
  background:var(--card);
  border-radius:30px;
  padding:20px;
  margin-bottom:22px;
  box-shadow:0 24px 50px rgba(0,0,0,.15);
  animation:rise .45s cubic-bezier(.2,.8,.2,1);
}

@keyframes rise{
  from{opacity:0;transform:translateY(30px)}
  to{opacity:1;transform:none}
}

input{
  width:100%;
  padding:16px;
  border-radius:18px;
  border:1px solid #eee;
  font-size:16px;
  margin-bottom:12px;
}

button{
  width:100%;
  padding:16px;
  border-radius:999px;
  background:linear-gradient(135deg,var(--pink),var(--purple));
  border:none;
  color:#fff;
  font-size:17px;
}

.tabs{
  position:fixed;
  bottom:0;left:0;right:0;
  display:flex;
  background:#ffffffee;
  backdrop-filter:blur(20px);
  border-top:1px solid #ddd;
}

.tabs button{
  flex:1;
  background:none;
  border:none;
  padding:14px 0 10px;
  font-size:14px;
}

.page{display:none;animation:slide .35s ease}
.page.active{display:block}

@keyframes slide{
  from{opacity:0;transform:translateX(20px)}
  to{opacity:1;transform:none}
}

.chart{
  height:220px;
  display:flex;
  align-items:flex-end;
  gap:10px;
  padding-top:10px;
}

.bar{
  flex:1;
  border-radius:12px 12px 6px 6px;
  background:linear-gradient(180deg,var(--blue),var(--purple));
  animation:grow .6s ease forwards;
}

@keyframes grow{
  from{height:0}
  to{height:var(--h)}
}

.encourage{
  font-size:18px;
  color:var(--pink);
  margin-top:8px;
}
</style>
</head>

<body>
<div class="app">

<div class="page active" id="weightPage">
<h1>‰ΩìÈáçËÆ∞ÂΩï</h1>

<div class="card">
<input id="name" placeholder="ÂßìÂêç">
<input id="date" type="date">
<input id="weight" type="number" step="0.1" placeholder="‰ΩìÈáç kg">
<button onclick="saveWeight()">‰øùÂ≠ò‰ΩìÈáç</button>
<div id="encourage" class="encourage"></div>
</div>

<div class="card">
<h2>‰ΩìÈáçË∂ãÂäø</h2>
<div class="chart" id="chart"></div>
</div>
</div>

</div>

<div class="tabs">
<button onclick="show('weightPage')">‚öñÔ∏è<br>‰ΩìÈáç</button>
</div>

<script>
const store=JSON.parse(localStorage.getItem("health")||"{}");
date.value=new Date().toISOString().slice(0,10);

function save(){
 localStorage.setItem("health",JSON.stringify(store));
}

function saveWeight(){
 const n=name.value.trim();
 const d=date.value;
 const w=Number(weight.value);
 if(!n||!d||!w)return;

 store[n]=store[n]||{weights:{}};
 const prev=Object.entries(store[n].weights).slice(-1)[0];
 store[n].weights[d]=w;
 save();

 if(prev){
  const last=prev[1];
  encourage.innerText=
   w<last?"‰ΩìÈáçÂú®‰∏ãÈôçÔºåÂùöÊåÅÂæóÂæàÂ•Ω üå±":
   w>last?"Êúâ‰∏ÄÁÇπÊ≥¢Âä®ÔºåÂà´ÁÑ¶Ëôë üçÉ":
   "Á®≥‰ΩèÂ∞±ÊòØËÉúÂà© ü§ç";
 }else{
  encourage.innerText="Á¨¨‰∏ÄÊ¨°ËÆ∞ÂΩïÔºåÂä†Ê≤π ‚ú®";
 }

 renderChart(n);
}

function renderChart(n){
 chart.innerHTML="";
 const entries=Object.entries(store[n].weights).sort();
 const max=Math.max(...entries.map(e=>e[1]));

 entries.slice(-7).forEach(e=>{
  const bar=document.createElement("div");
  bar.className="bar";
  bar.style.setProperty("--h",(e[1]/max*100)+"%");
  chart.appendChild(bar);
 });
}

function show(id){
 document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
 document.getElementById(id).classList.add("active");
}
</script>
</body>
</html>
